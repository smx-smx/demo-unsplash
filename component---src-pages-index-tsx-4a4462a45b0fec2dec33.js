"use strict";(self.webpackChunkflowbite_react_template_gatsby=self.webpackChunkflowbite_react_template_gatsby||[]).push([[691],{5791:function(e,t,a){a.d(t,{Z:function(){return d}});var l=a(7294),n=a(7320);var r=function(e){let{initialQuery:t,onSearch:a}=e;const{0:r,1:c}=(0,l.useState)(""),{0:s,1:o}=(0,l.useState)(!1),i=()=>{a(r)};return(0,l.useEffect)((()=>{o(!1)}),[t]),l.createElement("div",{className:"m-3 flex flex-row gap-2"},l.createElement(n.oi,{type:"text",placeholder:"Search for pictures...",value:r.length>0||s?r:t,onChange:e=>{o(!0),c(e.target.value)},onKeyDown:e=>{"Enter"==e.key&&i()}}),l.createElement(n.zx,{onClick:i},"Search"))},c=a(8325);var s=function(e){let{images:t}=e;return l.createElement("div",{className:"masonry-with-columns"},t.map((e=>l.createElement(c.Z,{key:e.id,data:e,fullPage:!1}))))},o=a(4160);var i=function(){return l.createElement(n.wp,{fluid:!0,rounded:!0},l.createElement(n.wp.Brand,{as:o.rU,href:"/"},l.createElement("span",{className:"self-center whitespace-nowrap text-xl font-semibold dark:text-white"},"Unsplash Demo")),l.createElement("div",{className:"flex md:order-2"},l.createElement(n.Lt,{arrowIcon:!1,inline:!0,label:l.createElement("div",{className:"relative size-10 overflow-hidden rounded-full bg-gray-100 dark:bg-gray-600"},l.createElement("svg",{className:"absolute -left-1 size-12 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"})))},l.createElement(n.Lt.Header,null,l.createElement("span",{className:"block text-sm text-gray-400"},"User Menu")),l.createElement(n.Lt.Item,null,l.createElement(o.rU,{to:"/favourites"},"Favourites")))))},m=a(6851),u=a(80),f=a(1085);var d=function(e){let{mode:t,imageIds:a}=e;const{0:c,1:o}=(0,l.useState)(""),{0:d,1:E}=(0,l.useState)(!1),{0:g,1:p}=(0,l.useState)([]),{0:v,1:h}=(0,l.useState)(1),{0:w,1:x}=(0,l.useState)(null),{0:y,1:k}=(0,l.useState)(""),{0:b,1:N}=(0,l.useState)(void 0),S=void 0!==a?Math.ceil(a.length/5):void 0,C=()=>null!=b,z=()=>{const e=(0,m.B)();N(e)};(0,l.useEffect)((()=>{const e=(0,f.$Z)();null!==e&&o(e),z()}),[]),(0,l.useEffect)((()=>{C()&&("main"===t&&c.length<1?_():M())}),[b]),(0,l.useEffect)((()=>{(0,f.gk)(c)}),[c]),(0,l.useEffect)((()=>{M()}),[v,c]);const _=()=>{const e=(()=>{const e=["Nature","Landscape","Animals","City","Food","Travel","Art","Architecture","Technology","Music"];return e[Math.floor(Math.random()*e.length)]})();o(e)},M=async()=>{try{x(null),await(async()=>{if(!C())return;const e=b;if(E(!0),"main"===t){var l,n;const t=await e.search.getPhotos({query:c,page:v,perPage:25});p(null!==(l=null===(n=t.response)||void 0===n?void 0:n.results)&&void 0!==l?l:[])}else if("favourites"==t&&void 0!==a){const t=5*(v-1),l=t+5,n=a.slice(t,l),r=(await Promise.all(n.map((t=>(console.debug("fetching "+t+"..."),e.photos.get({photoId:t})))))).filter((e=>void 0!==e.response)).map((e=>e.response));p(null!=r?r:[])}E(!1)})()}catch(w){E(!1),console.error(w),x("An error occurred, please try again later")}},j=async e=>{let t=!0,a=v;switch(e){case"+":(void 0===S||v<S)&&(a=v+1);break;case"-":v>1&&(a=v-1);break;default:t=!1}t&&h(a)};return C()?l.createElement("main",{className:"m-4 dark:bg-gray-800"},l.createElement(i,null),l.createElement("div",null,l.createElement("div",{className:"m-3 flex flex-row justify-center"},"main"===t&&l.createElement(r,{initialQuery:c,onSearch:e=>{e.length<1?_():o(e)}}),d&&l.createElement(n.$j,{size:"xl"})),l.createElement("div",null,l.createElement("div",{className:"mr-0 flex w-full flex-wrap place-content-end gap-1 justify-self-end"},l.createElement("span",null,"Page ",v,void 0!==S&&l.createElement(l.Fragment,null,"/",S," ",l.createElement("br",null),"(5 per page)"))),l.createElement("div",{className:"mr-0 flex w-full flex-wrap place-content-end gap-1 justify-self-end"},l.createElement(n.Tz,{onClick:()=>j("-"),icon:u.sG8}),l.createElement(n.Tz,{onClick:()=>j("+"),icon:u.AeI})),w&&l.createElement("div",{className:"w-full text-center"},l.createElement("span",{className:"text-2xl text-red-500"},w)),l.createElement(s,{images:g})))):l.createElement("main",{className:"flex min-h-screen items-center justify-center gap-2 dark:bg-gray-800"},l.createElement("div",{className:"flex flex-col"},l.createElement("div",null,l.createElement(n.__,null,"Enter api Token")),l.createElement("div",{className:"flex flex-row gap-1"},l.createElement(n.oi,{onChange:e=>k(e.target.value)}),l.createElement(n.zx,{onClick:()=>{(0,m.t)(y),z()}},"Set"))))}},7200:function(e,t,a){a.r(t),a.d(t,{Head:function(){return r}});var l=a(7294),n=a(5791);t.default=()=>l.createElement("main",null,l.createElement(n.Z,{mode:"main"}));const r=()=>l.createElement("title",null,"UnsplashJs Demo")}}]);
//# sourceMappingURL=component---src-pages-index-tsx-4a4462a45b0fec2dec33.js.map